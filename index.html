<!--
  Copyright (c) 2026, kgram1989
  All rights reserved. See LICENSE file for details.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="screen-orientation" content="landscape">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Space Run</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="game-container">
        <div class="hud-top">
            <div class="hud-left">
                <div class="hud-item hud-lives"><span id="lives">3</span></div>
                <div class="hud-item hud-shield">
                    <span class="shield-pip active"></span>
                    <span class="shield-pip active"></span>
                    <span class="shield-pip active"></span>
                </div>
                <div class="hud-item hud-score"><span id="score">0</span></div>
                <div class="hud-item hud-level">Lv.<span id="level">1</span></div>
            </div>
            <div class="hud-right">
                <button id="pauseBtn" class="hud-btn" onclick="togglePause()" title="Pause">&#10074;&#10074;</button>
                <button id="muteBtn" class="hud-btn" onclick="toggleMute()" title="Toggle Sound">&#x1F50A;</button>
            </div>
        </div>
        <div id="bossHealthBar" class="boss-health-bar hidden">
            <div id="bossPhaseLabel" class="boss-phase-label">PHASE 1</div>
            <div class="health-bar-container">
                <div class="health-bar-fill" id="bossHealthFill"></div>
                <div class="phase-marker" style="left: 60%"></div>
                <div class="phase-marker" style="left: 30%"></div>
            </div>
        </div>
        <div id="weaponText" class="weapon-text hidden"></div>
        <canvas id="gameCanvas"></canvas>
        <div id="startScreen" class="start-screen">
            <div class="mission-briefing">
                <h3 class="mission-title">OPERATION DEEP HORIZON</h3>
                <div class="briefing-text">
                    <!-- Populated dynamically from GAME_NARRATIVE -->
                </div>
            </div>
            <h2>SELECT DIFFICULTY</h2>
            <div class="difficulty-buttons">
                <button class="difficulty-btn" data-difficulty="easy">EASY</button>
                <button class="difficulty-btn" data-difficulty="medium">MEDIUM</button>
                <button class="difficulty-btn" data-difficulty="hard">HARD</button>
            </div>
            <p class="difficulty-info">Easy: Slower enemies | Medium: Normal speed | Hard: Fast & furious!</p>
        </div>
        <div id="gameOver" class="game-over hidden">
            <h2 id="gameOverTitle">GAME OVER</h2>
            <p>Final Score: <span id="finalScore">0</span></p>
            <p class="difficulty-display">Difficulty: <span id="gameDifficulty"></span> &nbsp;·&nbsp; Level: <span id="gameOverLevel"></span></p>
            <div id="highScores" style="margin: 20px 0; text-align: left; max-width: 400px;"></div>
            <div id="nameEntry" class="name-entry hidden">
                <p class="name-entry-label">&#127942; NEW HIGH SCORE! Enter your name:</p>
                <div class="name-entry-row">
                    <input type="text" id="playerNameInput" class="name-input"
                           maxlength="20" placeholder="Your name..." autocomplete="off" spellcheck="false" />
                    <button id="submitNameBtn" class="submit-name-btn">SUBMIT</button>
                </div>
            </div>
            <div class="game-over-actions">
                <button id="restartBtn">Play Again</button>
                <button id="continueBtn" class="hidden">Continue from Lv.<span id="continueLevel">1</span></button>
                <button id="shareScoreBtn" class="share-btn">Share Score</button>
            </div>
            <p id="shareStatus" class="share-status hidden"></p>
        </div>
<div id="pauseScreen" class="pause-screen hidden">
            <h2>PAUSED</h2>
            <p>Press P or ESC to Resume</p>
        </div>
        <div id="weaponHUD" class="weapon-hud">BLASTERS</div>
        <div class="controls">
            <p>Controls: ← → to Move | Space to Shoot | P to Pause | Esc to Exit</p>
        </div>
        <div id="touchControls" class="touch-controls">
            <div class="touch-left">
                <button id="touchLeft" class="touch-btn touch-move" aria-label="Move left">&#9664;</button>
                <button id="touchRight" class="touch-btn touch-move" aria-label="Move right">&#9654;</button>
            </div>
            <div class="touch-right">
                <button id="touchFire" class="touch-btn touch-fire" aria-label="Fire">&#x25CE;</button>
            </div>
        </div>
        <div id="rotateOverlay" class="rotate-overlay">
            <div class="rotate-content">
                <div class="rotate-icon">&#x1F4F1;</div>
                <p>Rotate your device to landscape</p>
            </div>
        </div>
    </div>
    <div id="scorePopupContainer"></div>
    <div id="damageFlash"></div>
    <script src="game.js"></script>
</body>
</html>
